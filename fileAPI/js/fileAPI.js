window.FileAPI = {	debug: false // debug mode	, staticPath: 'plugins/fileAPI/js/FileAPI/' // path to *.swf	, flashUrl: 'plugins/fileAPI/js/FileAPI/FileAPI.flash.swf'	, flashImageUrl: 'plugins/fileAPI/js/FileAPI/FileAPI.flash.image.swf'};$().ready(function () {	if (!(FileAPI.support.html5 || FileAPI.support.flash)) {		alert('Ooops, your browser does not support Flash and HTML5 :[');	}	// AJAX action confirmations	$('body').on('click', '.jqmLink', function () {		if ($(this).attr('data-url')) {			if ($('#confirmBox')) {				$('#confirmBox').remove();			}			$('body').prepend('<div id="confirmBox" class="jqmWindow"></div>');			$('#confirmBox').jqm({ajax: $(this).attr('data-url'), modal: false, onLoad: function () {					$('#confirmBox').css('margin-left', '-' + ($('#confirmBox').width() / 2) + 'px');					$('#confirmBox').css('margin-top', '-' + ($('#confirmBox').height() / 2) + 'px');				}});			$('#confirmBox').jqmShow();			return false;		} else {			return true;		}	});	$('.fapi_dndbox').on('click', function () {		$('#fapi_add_input').trigger('click');	});});$(document).on('ready ajaxSuccess', function () {	$('.fapi_images_preview').off("mouseenter mouseleave");	$('.fapi_images_preview').hover(			function ()			{				$(this).children('.fapi_edit_title').css('opacity', 1);			}, function () {		$(this).children('.fapi_edit_title').css('opacity', 0);	}	);	$('.fapi_del').off('click');	$('.fapi_del').on('click', function () {		var id = $(this).attr('data-id');		fapiGetFile(id, 'delete');	});	if (fileAPI_preset.currentfiles < 1) {		$('#fapi_add_input, .fapi_dndbox').prop('disabled', true);		$('.fapi_btn_box, .fapi_dnd_add_btn').addClass('fapi_opacity');			} else {		$('#fapi_add_input, .fapi_dndbox').prop('disabled', false);		$('.fapi_btn_box, .fapi_dnd_add_btn').removeClass('fapi_opacity');	}	if (fileAPI_preset.currentfiles == 1 && fileAPI_preset.multiple) {		FileAPIobj.fileapi("multiple", false);	} else {		FileAPIobj.fileapi("multiple", fileAPI_preset.multiple);	}});function fapiCurrentCount(act) {	if(act){		fileAPI_preset.currentfiles++;		if (fileAPI_preset.currentfiles === 0){ fileAPI_preset.currentfiles++; }	}else{		fileAPI_preset.currentfiles--;		if (fileAPI_preset.currentfiles === 0){ fileAPI_preset.currentfiles--; }		}	FileAPIobj.fileapi("maxFiles", fileAPI_preset.currentfiles);}function fapiGetFile(id, action,widgetId) {	var data = fileAPI_preset.data;	data.id = id;	data.act = action;	$.ajax({		type: "POST",		url: fileAPI_preset.elementurl,		data: data,		success: function (msg) {			if (action === 'view') {				fapiCurrentCount(false);				fapiActionElement.view(msg,id,widgetId);							}			if (action === 'delete' && msg === 'delete') {								fapiCurrentCount(true);				fapiActionElement.delete(id);				return true;			}					}	});}